# 📚 AI 智能书签管理器

一款美观、高效的 Chrome 扩展，支持标签分类、颜色标记和 AI 自动分类。使用 Chrome 侧边栏，让书签管理更便捷。

## ✨ 主要功能

### 📑 书签管理
- **标签分类**: 为书签添加多个标签，灵活组织
- **颜色标记**: 7 种颜色快速分类书签
- **拖拽排序**: 鼠标拖拽自定义书签顺序
- **批量操作**: 支持多选、批量删除、批量标签

### 🔍 智能搜索
- **实时搜索**: 300ms 防抖，流畅体验
- **多字段搜索**: 同时搜索标题、URL、标签
- **搜索结果统计**: 实时显示匹配数量

### 🤖 AI 功能
- **智能标签建议**: AI 分析网页内容，自动推荐标签
- **多 AI 平台支持**: OpenAI、DeepSeek、自定义 API
- **一键分类**: 批量为书签生成标签

### 📥 导入导出
- **JSON 格式**: 完整保留元数据（标签、颜色、时间戳）
- **HTML 格式**: Chrome/Firefox 标准格式兼容
- **重复检测**: 智能识别重复书签
- **导入预览**: 导入前查看数据概况

### 🔄 书签去重
- **智能检测**: 自动识别重复的书签 URL
- **URL 标准化**: 忽略协议、www、末尾斜杠等差异
- **灵活选择**: 手动选择要保留的书签
- **元数据合并**: 自动合并标签和颜色到保留的书签
- **批量处理**: 一键清理所有重复书签

### 🎨 外观定制
- **深色/浅色模式**: 自动跟随系统或手动切换
- **响应式设计**: 适配各种屏幕尺寸
- **流畅动画**: 优雅的过渡效果

### ⚡ 性能优化
- **虚拟滚动**: 支持 10000+ 书签流畅滚动
- **懒加载**: 图标按需加载
- **缓存机制**: 5 秒 TTL，减少 API 调用
- **批量 DOM 操作**: 减少重排重绘

## 📦 安装

### 从源码安装

1. 克隆仓库
```bash
git clone https://github.com/ther000/BookMark.git
cd BookMark
```

2. 加载扩展
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目目录

3. 使用扩展
   - 点击工具栏图标打开侧边栏
   - 或使用 Ctrl+D 添加当前页面为书签

## 🚀 快速开始

### 1. 配置 AI（可选）
1. 点击侧边栏右上角 ⚙️ 图标
2. 选择 AI 提供商（OpenAI / DeepSeek / 自定义）
3. 输入 API 密钥
4. 点击"测试连接"验证
5. 保存设置

### 2. 添加书签
- **方法 1**: 浏览任意网页，按 `Ctrl+D`
- **方法 2**: 点击侧边栏中的 "+" 按钮
- **方法 3**: 右键网页 → 添加到书签

### 3. 管理书签
- **添加标签**: 点击书签卡片上的标签图标
- **设置颜色**: 点击书签卡片上的颜色图标
- **AI 标签**: 点击书签卡片上的 AI 图标
- **拖拽排序**: 按住书签拖动到目标位置

### 4. 搜索和筛选
- **搜索**: 在顶部搜索框输入关键词
- **标签筛选**: 点击左侧标签栏的标签（支持多选）
- **颜色筛选**: 点击顶部颜色栏的颜色
- **互斥规则**: 颜色筛选和标签筛选同一时间只能使用一种（自动切换）

### 5. 导入导出
1. 点击工具栏 📥 图标
2. 选择"导入"或"导出"标签页
3. 导入：选择 JSON/HTML 文件
4. 导出：选择格式和范围

### 6. 书签去重
1. 点击工具栏 🧊 去重按钮
2. 点击"扫描重复"检测重复书签
3. 查看重复组列表，选择要保留的书签
4. 点击"自动去重"批量清理，或单独删除

详细说明请查看 [docs/DEDUPLICATION.md](docs/DEDUPLICATION.md)

## 📁 项目结构

```
BookMark/
├── manifest.json          # 扩展配置
├── package.json           # 项目配置
├── LICENSE                # MIT 许可证
├── README.md              # 本文件
│
├── docs/                  # 文档目录
├── icons/                 # 图标资源
│
└── src/                   # 源代码
    ├── background/        # 后台服务
    ├── core/              # 核心模块
    │   ├── storage.js            # 数据存储
    │   ├── ai.js                 # AI 功能
    │   ├── utils.js              # 工具函数
    │   ├── performance.js        # 性能优化
    │   └── import-export.js      # 导入导出
    │
    ├── pages/             # 页面文件
    │   ├── sidepanel/            # 侧边栏（主界面）
    │   ├── settings/             # 设置页面
    │   ├── manager/              # 管理器
    │   └── popup/                # 弹出窗口
    │
    └── styles/            # 共享样式
```

详细说明请查看 [src/FILE_STRUCTURE.md](src/FILE_STRUCTURE.md)

## 🔧 技术栈

- **JavaScript ES6+**: 原生 JavaScript，无框架依赖
- **Chrome Extension API**: Manifest V3
- **Chrome Storage API**: 数据同步
- **Chrome Bookmarks API**: 书签管理
- **CSS3**: 现代 CSS 特性
- **AI API**: OpenAI / DeepSeek 集成

## 📊 性能指标

测试环境：1000 个书签

- 初始加载: ~200ms
- 搜索响应: ~50ms
- 筛选操作: ~30ms
- 渲染速度: ~100ms
- 导入 100 个: ~2s
- 导出 1000 个: ~500ms

## 🔒 隐私政策

- ✅ 所有数据存储在本地，通过 Chrome 账户同步
- ✅ 扩展本身不收集任何用户数据
- ✅ AI 功能使用时，内容发送到您配置的 API 端点
- ✅ API 密钥加密存储，仅在本地使用
- ✅ 可随时导出或删除所有数据

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

### 开发指南

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

### 代码规范

- 使用 ES6+ 语法
- 添加必要的注释
- 遵循现有代码风格
- 测试新功能

## 📝 更新日志

### v2.0.2 (2025-01-14)
- 🎯 优化筛选逻辑：颜色筛选和标签筛选改为互斥（同时只能使用一种）
- � 修复标签筛选逻辑：多标签筛选改为 OR 逻辑（显示有任一标签的书签）
- �💡 提升用户体验：自动切换筛选方式，操作更直观
- 📝 完善筛选功能文档

### v2.0.1 (2025-01-14)
- 🐛 修复存储配额超限问题（迁移到 local storage）
- 🔄 添加自动数据迁移功能
- 📝 完善存储策略文档

### v2.0.0 (当前版本)
- ✨ 重构项目文件结构
- ✨ 新增导入导出功能（JSON + HTML）
- ✨ 新增书签去重功能（智能检测 + 批量清理）
- ✨ 增强搜索功能（防抖 + 多字段）
- ✨ 性能优化（缓存 + 虚拟滚动）
- ✨ 新增空状态提示
- ✨ 新增 Toast 通知系统
- ✨ 新增加载指示器
- ✨ 响应式布局优化
- 🐛 修复未标记书签无法添加标签的问题
- 🔧 移除统计分析功能
- 🔧 移除设置页面数据管理

### v1.0.0
- 🎉 首次发布
- 📑 基础书签管理
- 🏷️ 标签系统
- 🎨 颜色分类
- 🤖 AI 标签建议
- 🔍 搜索功能

详细日志请查看 [docs/CHANGELOG_V2.md](docs/CHANGELOG_V2.md)（如果存在）

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 🙏 致谢

- Chrome Extension API 文档
- OpenAI API
- DeepSeek API
- 所有贡献者和用户

## 📧 联系方式

- 项目主页: https://github.com/ther000/BookMark
- Issue 反馈: https://github.com/ther000/BookMark/issues

---

**⭐ 如果这个项目对您有帮助，请给个 Star！**
